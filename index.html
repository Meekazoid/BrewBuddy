<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BrewBuddy - Your Coffee Companion</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="header-left">
                <img src="images/logo.svg" alt="BrewBuddy Logo" class="logo">
            </div>
            <h1 class="header-title">BrewBuddy</h1>
            <div class="header-right">
                <span id="settingsBtn" style="cursor: pointer; padding: 10px; display: inline-block;">‚öôÔ∏è</span>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <!-- Add Coffee Card -->
        <div class="coffee-card add-card" id="addCard">
            <div class="add-content">
                <svg class="add-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <circle cx="12" cy="12" r="10"/>
                    <line x1="12" y1="8" x2="12" y2="16"/>
                    <line x1="8" y1="12" x2="16" y2="12"/>
                </svg>
                <span class="add-text">Add Coffee</span>
            </div>
        </div>

        <!-- Coffee List -->
        <div id="coffeeList"></div>
    </main>

    <!-- Add Coffee Modal -->
    <div id="addModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Coffee</h2>
                <span class="modal-close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <label>üì∏ Upload Coffee Bag Photo</label>
                    <input type="file" id="photoInput" accept="image/*" capture="environment">
                    <div id="photoPreview" class="photo-preview"></div>
                    <button id="analyzeBtn" class="btn-analyze" style="display: none;">
                        <svg class="icon-analyze" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                        Analyze with AI
                    </button>
                    <div id="analysisStatus" class="analysis-status"></div>
                </div>

                <div class="input-group">
                    <label>Coffee Name</label>
                    <input type="text" id="coffeeName" placeholder="e.g., Ethiopian Yirgacheffe">
                </div>

                <div class="input-group">
                    <label>Origin</label>
                    <input type="text" id="coffeeOrigin" placeholder="e.g., Ethiopia, Yirgacheffe">
                </div>

                <div class="input-group">
                    <label>Process</label>
                    <select id="coffeeProcess">
                        <option value="washed">Washed</option>
                        <option value="natural">Natural</option>
                        <option value="honey">Honey</option>
                        <option value="anaerobic">Anaerobic</option>
                        <option value="other">Other</option>
                    </select>
                </div>

                <div class="input-group">
                    <label>Cultivar</label>
                    <input type="text" id="coffeeCultivar" placeholder="e.g., Heirloom">
                </div>

                <div class="input-group">
                    <label>Altitude (masl)</label>
                    <input type="text" id="coffeeAltitude" placeholder="e.g., 1800-2200">
                </div>

                <div class="input-group">
                    <label>Roaster</label>
                    <input type="text" id="coffeeRoaster" placeholder="e.g., Local Coffee Co.">
                </div>

                <div class="input-group">
                    <label>Tasting Notes</label>
                    <input type="text" id="coffeeTasting" placeholder="e.g., Blueberry, Jasmine, Citrus">
                </div>

                <div class="input-group">
                    <label>Roast Date</label>
                    <input type="date" id="coffeeRoastDate">
                </div>

                <button id="saveCoffeeBtn" class="btn-primary">Save Coffee</button>
            </div>
        </div>
    </div>

    <!-- Edit Coffee Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Coffee</h2>
                <span class="modal-close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <label>Coffee Name</label>
                    <input type="text" id="editCoffeeName">
                </div>

                <div class="input-group">
                    <label>Origin</label>
                    <input type="text" id="editCoffeeOrigin">
                </div>

                <div class="input-group">
                    <label>Process</label>
                    <select id="editCoffeeProcess">
                        <option value="washed">Washed</option>
                        <option value="natural">Natural</option>
                        <option value="honey">Honey</option>
                        <option value="anaerobic">Anaerobic</option>
                        <option value="other">Other</option>
                    </select>
                </div>

                <div class="input-group">
                    <label>Cultivar</label>
                    <input type="text" id="editCoffeeCultivar">
                </div>

                <div class="input-group">
                    <label>Altitude (masl)</label>
                    <input type="text" id="editCoffeeAltitude">
                </div>

                <div class="input-group">
                    <label>Roaster</label>
                    <input type="text" id="editCoffeeRoaster">
                </div>

                <div class="input-group">
                    <label>Tasting Notes</label>
                    <input type="text" id="editCoffeeTasting">
                </div>

                <div class="input-group">
                    <label>Roast Date</label>
                    <input type="date" id="editCoffeeRoastDate">
                </div>

                <button id="updateCoffeeBtn" class="btn-primary">Update Coffee</button>
                <button id="deleteCoffeeBtn" class="btn-delete">Delete Coffee</button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Settings</h2>
                <div id="closeSettingsBtn" class="modal-close" style="cursor: pointer;">&times;</div>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h3>üîê Backend Access</h3>
                    <p class="settings-description">Enter your access code to sync your coffee collection across devices.</p>
                    
                    <div class="input-group">
                        <label>Access Code</label>
                        <input type="text" id="tokenInput" placeholder="Enter your token here">
                    </div>

                    <div id="tokenStatus" class="token-status"></div>

                    <div class="button-group">
                        <button id="saveTokenBtn" class="btn-primary">Save Access Code</button>
                        <button id="clearTokenBtn" class="btn-secondary">Clear Access Code</button>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>üìä Your Data</h3>
                    <p class="settings-description">Manage your local coffee collection data.</p>
                    
                    <div class="button-group">
                        <button id="exportBtn" class="btn-secondary">Export Data (JSON)</button>
                        <button id="clearDataBtn" class="btn-delete">Clear All Data</button>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>‚ÑπÔ∏è About</h3>
                    <p class="settings-description">
                        BrewBuddy v1.0<br>
                        Your personal coffee companion<br>
                        Made with ‚òï by meekazoid
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Brew Modal -->
    <div id="brewModal" class="modal">
        <div class="modal-content brew-modal-content">
            <div class="modal-header">
                <h2>Brew Parameters</h2>
                <span class="modal-close">&times;</span>
            </div>
            <div class="modal-body">
                <div id="brewParameters"></div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script src="backend-sync.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const sBtn = document.getElementById('settingsBtn');
            const cBtn = document.getElementById('closeSettingsBtn');
            const modal = document.getElementById('settingsModal');

            // √ñffnen
            if(sBtn) {
                sBtn.onclick = (e) => {
                    e.preventDefault();
                    modal.style.display = 'flex';
                };
            }

            // Schlie√üen via X
            if(cBtn) {
                cBtn.onclick = () => {
                    modal.style.display = 'none';
                };
            }

            // Schlie√üen via Klick au√üerhalb
            window.onclick = (e) => {
                if(e.target === modal) {
                    modal.style.display = 'none';
                }
            };
        });
    </script>
</body>
</html>
